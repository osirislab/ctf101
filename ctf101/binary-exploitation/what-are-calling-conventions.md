# Calling Conventions

To be able to call functions, there needs to be an agreed-upon way to pass arguments. If a program is entirely self-contained in a binary, the compiler would be free to decide the calling convention. However in reality, shared libraries are used so that common code (e.g. libc) can be stored once and dynamically linked in to programs that need it, reducing program size.

In Linux binaries, there are really only two commonly used calling conventions: cdecl for 32-bit binaries, and SysV for 64-bit

## cdecl

In 32-bit binaries on Linux, function arguments are passed in on [the stack](./what-is-the-stack) in reverse order. A function like this:

```c
int add(int a, int b, int c) {
    return a + b + c;
}
```

would be invoked by pushing `c`, then `b`, then `a`.

## SysV

For 64-bit binaries, function arguments are first passed in certain registers:

1. RDI
2. RSI
3. RDX
4. RCX
5. R8
6. R9

then any leftover arguments are pushed onto the stack in reverse order, as in cdecl.

## Other Conventions

Any method of passing arguments could be used as long as the compiler is aware of what the convention is. As a result, there have been _many_ calling conventions in the past that aren't used frequently anymore. See [Wikipedia](https://en.wikipedia.org/wiki/X86_calling_conventions) for a comprehensive list.
